<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Help for "AlongRoute" Filter macro by Hynr</title>
</head>
<body>

<h1>Help for "AlongRoute" GSAK filter macro</h1>

<p>This macro sets a filter in GSAK to select all the geocaches in the
current database which are within some distance of a particular route
where the route is the one returned by Google Maps. As such the
computer needs to have internet access to Google Maps&nbsp;for this
to work.</p>
<p>The main macro dialog shows a left side where the route is specified
and the right side where the filter is sepecified. On both left and
right side buttons are hidden until the macro has enough data from the
user to implement the action.</p>

<h2>Selecting a Route</h2>

<p>The route is specified by 2, 3, 4 or 5 nodes. Initially only
2 lines are shown (a Start and a destination); the destination is
generally the first via-point in a multi-segment route. Once a
Destination is specified, a button is presented to let the user select
a thrid point ("then to:"). This continues as long as the user selects
more nodes. Leave one blank to end the selection process.</p>
<p>Note that the fields next to the buttons are the exact text that is
needed as part of the URL call to Google Maps. You can edit here if you
know what you are doing; leave it alone otherwise.</p>
<p>Once the macro has at least one segment, buttons are displayed to
preview the route with the default browser or with Google Earth in a
separate window. Note that there is no feedback from those windows to
the macro; this is only for display purposes. If the preview to Google
Maps does not work, then the actual setting of the filter cannot work
either.</p>
<p>The button to "Add to Recent Route List" allows re-using routes at
later dates by saving the needed information to reconstruct the files
directly above that button on the main dialog of the macro. </p>

<h2>Selecting a Location</h2>

<p>A new dialog opens up ("Select a location") when pressing the buttons
for selecting a location. This selection dialog offers a lot of
flexibility for the user for specifying locations. 
The user may use either the "Select a GCcode" panel or "Select a location" panel
to identify a location that is readily available in GSAK. 
Selecting in either panel results in an entry
into the editbox in "Making a selelction" panel below. </p>
<p>Note that it is possible to edit in this editbox to make any desired
modification. You can also enter brand new text here. If you enter
text, then be sure to enter it with the same format as you would
present to Google Maps if you were using that tool to find a location. 
You should only use text that resolved to a particular place without triggering help to narrow it down.
As such you can enter a town or city name, followed by state and coutnry names. 
Here are some examples of what you can type in:</p>
<br>
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td>
      <h3>Desired Location </h3>
      </td>
      <td>
      <h3>How to type it in to the editbox</h3>
      </td>
    </tr>
    <tr>
      <td>The city of San Francisco, California, USA
         (it is not clear, generally, what point is used, but it is probably near the city center)
      </td>
      <td>San Francisco, California
      </td>
    </tr>
    <tr>
      <td>Coordinates with a comment;
          the comment in perentheses is optional and included only to help with the previewing
      </td>
      <td>38.0 -122.0 (corner of degree quad)
      </td>
    </tr>
    <tr>
      <td>Specific codes that Google Maps understands as one individual location. 
          E.g. Airport codes SMF=Sacramento International Airport
      </td>
      <td>SMF</td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>
<p>It may take a little practice and trial-and-error at the Google Maps
site to learn what it can accept as input for a specific location.<br>
When the "Select a Location" dialog closes it will pass the infomration
back to the main dialog in the format of the paramerter that will work
in the Google Maps URL.</p>

<h2>Current Filter</h2>

<p>Note that the current filter that is active when the macro is started
(if a filter is set) is respected and can be particularly useful when
selecting GC codes on the above dialog. But there may come a time when,
during the execution of the macro, you may want to cancel this filter.
A button is provided for this purpose. Generally you would not need to
cancel the filter.</p>

<h2>Setting the "Along Route" filter</h2>

<p>Note that you do need to tell GSAK how far away from the route you want
geocaches included. The number for this distance is in the same units
as the units that GSAK uses on the Arc/Poly tab of the Filter dialog.
&nbsp;In fact, the number that is entered here is transferred to
that dialog for you along with the coordinates that Google Maps
generates for the route you specified.</p>
<p>Note that you can set a few common filter elements by the macro even
including a "Where" clause. But you should be aware that whatever ends
up being set as a filter can readily be inspected and changed with the
Filter dialog after the filter is set.</p>
<p>Note also that whatever route filter you want to set, you can either
set that against the entire database (Set Fliter) or by joining it to
whatever filter is already set. Joining with "And" means that the the
result is the intersection of the two sets; Joing with "Or" results in
all caches that meet the requirements of either the filter that was
already set or the new "along route" filter.</p>
<p>Also: depending on how complex the route is, there may be hundreds of nodes.
Each segment is, in fact, simplified down to 50 nodes, but a total of 200 nodes
(if using all 4 segments) can still take quite a bit of time to filter a large database.
As a consequence, setting the filter can take a minute or two. </p>
</body>
</html>
